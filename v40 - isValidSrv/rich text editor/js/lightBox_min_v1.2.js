//Lightbox v1.1 Powered by NUI Framework
function lightBox(b){var e=this;var a="";e.currObj="";e.flag=false;e.escapeObj=b.ecp;e.returnFocus=b.returnFocus;e.trigger=$n("#"+b.trigger);e.contId=$n("#"+b.contId);e.closeBtn=$n("#"+b.closeBtn);e.fixedLayer=b.fixedLayer;e.contWidth=b.contWidth;var c=document.documentElement.scrollTop||document.body.scrollTop;var d=document.documentElement.scrollLeft||document.body.scrollLeft;e.resizeLayer=function(){e.layer.css({width:document.body.scrollWidth+"px",height:document.body.scrollHeight+"px"});e.frame.css({width:document.body.scrollWidth+"px",height:document.body.scrollHeight+"px"});e.resizeOverLay()};e.getTop=function(){var f=document.documentElement.clientHeight;f=f-e.contId.height();return f};e.getLeft=function(){var f=document.documentElement.clientWidth;f=f-e.contId.width();return f};e.centerLayer=function(){e.contId.css({width:e.contWidth+"px"});e.contId.css({top:e.getTop()/2+c+"px"});e.contId.css({left:e.getLeft()/2+d+"px"});e.focusTest();if(e.fixedLayer==true){e.fix()}};e.fix=function(){var g=navigator.appName;var f=parseInt(navigator.appVersion);if(g=="Microsoft Internet Explorer"&&f>=4){window.onscroll=function(){var h=document.documentElement.scrollTop||document.body.scrollTop;var j=document.documentElement.scrollLeft||document.body.scrollLeft;e.contId.css({top:e.getTop()/2+h+"px"});e.contId.css({left:e.getLeft()/2+j+"px"})}}else{e.contId.css({top:e.getTop()/2+"px"});e.contId.css({left:e.getLeft()/2+"px"});e.contId.css({position:"fixed"})}};e.resetLayer=function(){el[0].selectedIndex=0;var j=$n("#"+b.contId+" textarea");for(p=0;p<j.length;p++){j.eq(p).attr("value","")}var h=$n("#"+b.contId+" input");for(i=0;i<h.length;i++){switch(h.eq(i).attr("type")){case"text":h.eq(i).attr("value","");break;case"checkbox":var g=h.eq(i).currObj();g.checked==true?g.checked=false:"";break;case"radio":h.eq(i).attr("checked","");var f=h.eq(i).currObj();f.selected==true?f.selected=false:"";case"password":h.eq(i).attr("value","");break}}};e.focusTest=function(){var f=e.contId.childs();for(x in f){if(x=="INPUT"){f[x].setFocus();break}else{if(x=="TEXTAREA"){f[x].setFocus();break}else{if(x=="SELECT"){f[x].setFocus();break}else{if(x=="A"){f[x].setFocus()}}}}}};e.overLay=function(){if(!e.layer&&!e.frame){e.layer=$n("<div>");e.layer.addClass("layer");e.layer.attr("id","blackLayer");var g=(el[0]);$n("body").append(g);e.frame=$n("<iframe>");e.frame.addClass("ifrm");e.frame.attr("id","frm");e.frame.attr("scrolling","no");e.frame.attr("frameborder",0);var h=(el[0]);$n("body").append(h);if(e.returnFocus==true){e.layer.addEvent("click",function(){e.formEle.setFocus()})}}else{e.layer.show();e.frame.show()}};e.formEle="";e.showLayer=function(){e.overLay();var j=document.body.scrollWidth-document.body.offsetWidth;var f=document.body.scrollHeight-document.body.offsetHeight;e.layer.css({width:document.body.offsetWidth+j+"px",height:document.body.offsetHeight+f+"px"});e.frame.css({width:document.body.offsetWidth+j+"px",height:document.body.offsetHeight+f+"px"});e.resizeOverLay();e.contId.show();e.centerLayer();e.escapeObj?e.escape():"";var f=$n("#"+b.contId+" form").currObj().elements;for(var g=0;g<f.length;g++){$n(f[g]).addEvent("focus",function(){e.formEle=$n(this)})}};e.escape=function(){$n("body").addEvent("keyup",function(f){(!f)?window.event:f;f.keyCode==27?e.hideLayer():""})};e.hideLayer=function(){e.trigger.setFocus();e.resetLayer();e.contId.hide();e.layer.hide();e.frame.hide()};e.resizeOverLay=function(){if(e.layer&&document.documentElement.scrollHeight){e.layer.css({height:document.documentElement.scrollHeight+"px"});e.layer.css({width:document.documentElement.scrollWidth+"px"})}};e.closeBtn.addEvent("click",e.hideLayer,false);window.onresize=function(){e.centerLayer();e.resizeOverLay()};e.showLayer()};
